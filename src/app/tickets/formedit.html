<h1 mat-dialog-title style="display:flex !important ;justify-content: flex-end !important;">{{data.titulo}}</h1>
<div mat-dialog-content>
  <mat-tab-group animationDuration="0ms">
    <mat-tab label="Información General">
      <div class="row" style="max-width: 90%;">
        <div class="col-md-2 col-sm-6">
          <form [formGroup]="data.ticketFormG">
            <mat-form-field appearance="standard">
              <mat-label>Fecha de Ticket</mat-label>
              <input matInput [matDatepicker]="picker" formControlName="fechai">
              <mat-hint>MM/DD/YYYY</mat-hint>
              <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
              <mat-datepicker #picker></mat-datepicker>
            </mat-form-field>
          </form>
        </div>
      </div>
      <mat-divider></mat-divider>
      <form [formGroup]="data.generalFormG">
        <div class="row" style="max-width: 90%;">
          <div class="col-md-4 col-sm-6">
            <mat-form-field appearance="standard">
              <mat-label>Técnico Responsable</mat-label>
              <input matInput required formControlName="tresp">
            </mat-form-field>

          </div>
          <div class="col-md-4 col-sm-6">
            <mat-form-field appearance="standard">
              <mat-label>Reportado por</mat-label>
              <input matInput [matAutocomplete]="us" formControlName="reportado">
              <mat-autocomplete #us="matAutocomplete" [displayWith]="displayFn.bind(this)">
                <mat-option *ngFor="let e of filteredOptionsUsuario | async" [value]="e">
                  {{e.nombre}}
                </mat-option>
              </mat-autocomplete>
            </mat-form-field>
          </div>
        </div>
        <mat-divider></mat-divider>
        <div class="row" style="max-width: 90%;">
          <div class="col-md-4 col-sm-6">
            <mat-form-field appearance="standard">
              <mat-label>Tipo de Problema</mat-label>
              <mat-select id="a" name="a" required formControlName="problema">
                <mat-option *ngFor="let a of data.problemas" [value]="a">
                  {{a.nombre}}
                </mat-option>
              </mat-select>
            </mat-form-field>
          </div>
          <div class="col-md-2 col-sm-6">
            <mat-form-field appearance="standard">
              <mat-label>Personal que dió soporte</mat-label>
              <input matInput required formControlName="soporte">
            </mat-form-field>
          </div>
          <div class="col-md-2 col-sm-6">
            <mat-form-field appearance="standard">
              <mat-label>Proveedor</mat-label>
              <mat-select id="a" name="a" required formControlName="proveedor" (selectionChange)="obtenerInfoAgencias()">
                <mat-option *ngFor="let a of data.propietarios" [value]="a">
                  {{a.nombre}}
                </mat-option>
              </mat-select>
            </mat-form-field>
          </div>
          <div class="col-md-2 col-sm-6">
            <mat-form-field appearance="standard">
              <mat-label>Ticket de Proveedor</mat-label>
              <input matInput formControlName="ttprov">
            </mat-form-field>
          </div>
        </div>
        <mat-divider></mat-divider>
        <div>
          <mat-form-field class="example-full-width">
            <mat-label>Descripcion</mat-label>
            <textarea rows="5" matInput formControlName="descripcion"></textarea>
          </mat-form-field>
        </div>
      </form>
    </mat-tab>
    <mat-tab label="Eventos">
      <div class="row" style="max-width: 90%;">
        <div class="col-md-2 col-sm-6">
          <mat-form-field class="example-full-width">
            <mat-label>Ciudad</mat-label>
            <mat-select id="a" name="a" [formControl]="citiescontrol" multiple (selectionChange)="obtenerInfoTipos()">
              <mat-option *ngFor="let a of data.cities" [value]="a">
                {{a.nombre}}
              </mat-option>
            </mat-select>
          </mat-form-field>
        </div>
        <div class="col-md-2 col-sm-6">
          <mat-form-field class="example-full-width">
            <mat-label>Tipo</mat-label>
            <mat-select id="a" name="a" multiple [formControl]="tiposcontrol" (selectionChange)="obtenerInfoAgencias()">
              <mat-option *ngFor="let a of tipos" [value]="a">
                {{a.nombre}}
              </mat-option>
            </mat-select>
          </mat-form-field>
        </div>
        <div class="col-md-6 col-sm-6">
          <mat-form-field class="example-full-width">
            <mat-label>Agencias</mat-label>
              <input matInput [matAutocomplete]="agencia" [formControl]="agenciascontrol" >                           
                                <mat-autocomplete #agencia="matAutocomplete"
                                 [displayWith]="displayFn.bind(this)">
                                    <mat-option *ngFor="let e of filteredOptionsAgencias | async" [value]="e">
                                      {{e.nombreagencia}}
                                    </mat-option>
                                </mat-autocomplete>
            
          </mat-form-field>
        </div>
      </div>
      <div class="row" style="max-width: 90%;">
        <div class="col-md-2 col-sm-6">
          <mat-form-field class="example-full-width">
            <mat-label>Tiempo Completo</mat-label>
            <mat-select id="a" name="a" required  [(value)]="tcform" (selectionChange)="selectiond2($event.value)">
              <mat-option *ngFor="let a of tcompleto" [value]="a">
                {{a}}
              </mat-option>
            </mat-select>
          </mat-form-field>
        </div>
        <div class="col-md-2 col-sm-6">
          <mat-form-field class="example-full-width">
            <mat-label>Tiempo de Inicio</mat-label>
            <input type="datetime-local" [(ngModel)]="d1form" matInput>
          </mat-form-field>
        </div>
        <div class="col-md-2 col-sm-6">
          <mat-form-field class="example-full-width" >
            <mat-label>Tiempo de Carga</mat-label>
            <input type="datetime-local"  [(ngModel)]="d2form" [formControl]="t2control" matInput >
          </mat-form-field>
        </div>
        <div class="col-md-2 col-sm-6">
          <mat-form-field class="example-full-width">
            <mat-label>Tiempo Final</mat-label>
            <input type="datetime-local"  [(ngModel)]="d3form" matInput >
          </mat-form-field>
        </div>
        <div class="col-md-2 col-sm-6">
          <div class="example-full-width">
            <button mat-raised-button class="demo-button" (click)="addtime()">
              <i class="material-icons">add</i>
              Agregar
            </button>
          </div>
        </div>
      </div>
      <div class="table-responsive">
        <table  mat-table [dataSource]="dataEventos">
          
          <ng-container matColumnDef="demo-ciudad">
            <th mat-header-cell *matHeaderCellDef>
              <mat-form-field class="example-full-width" appearance="none">
                <mat-label>Ciudad</mat-label>
                <input matInput disabled>
              </mat-form-field>
            </th>
            <td mat-cell *matCellDef="let element">
              {{element.ciudad}}
            </td>
          </ng-container>

          <ng-container matColumnDef="demo-tipo">
            <th mat-header-cell *matHeaderCellDef>
              <mat-form-field class="example-full-width" appearance="none">
                <mat-label>Tipo</mat-label>
                <input matInput disabled>
              </mat-form-field>
            </th>
            <td mat-cell *matCellDef="let element">
              {{element.tipo}}
            </td>
          </ng-container>

          <ng-container matColumnDef="demo-agencia">
            <th mat-header-cell *matHeaderCellDef>
              <mat-form-field class="example-full-width" appearance="none">
                <mat-label>Agencia</mat-label>
                <input matInput disabled>
              </mat-form-field>
            </th>
            <td mat-cell *matCellDef="let element">
              {{element.agencia}}
            </td>
          </ng-container>

          <ng-container matColumnDef="demo-tc">
            <th mat-header-cell *matHeaderCellDef>
              <mat-form-field class="example-full-width" appearance="none">
                <mat-label>Tiempo Completo</mat-label>
                <input matInput disabled>
              </mat-form-field>
            </th>
            <td mat-cell *matCellDef="let element">
              {{element.tc}}
            </td>
          </ng-container>

          <ng-container matColumnDef="demo-d1">
            <th mat-header-cell *matHeaderCellDef>
              <mat-form-field class="example-full-width" appearance="none">
                <mat-label>Tiempo de Inicio</mat-label>
                <input matInput disabled>
              </mat-form-field>
            </th>
            <td mat-cell *matCellDef="let element">
              {{element.d1}}
            </td>
          </ng-container>

          <ng-container matColumnDef="demo-d2">
            <th mat-header-cell *matHeaderCellDef>
              <mat-form-field class="example-full-width" appearance="none">
                <mat-label>Tiempo de Carga</mat-label>
                <input matInput disabled>
              </mat-form-field>
            </th>
            <td mat-cell *matCellDef="let element">
              {{element.d2}}
            </td>
          </ng-container>

          <ng-container matColumnDef="demo-d3">
            <th mat-header-cell *matHeaderCellDef>
              <mat-form-field class="example-full-width" appearance="none">
                <mat-label>Tiempo Final</mat-label>
                <input matInput disabled>
              </mat-form-field>
            </th>
            <td mat-cell *matCellDef="let element">
              {{element.d3}}
            </td>
          </ng-container>

          <ng-container matColumnDef="demo-total">
            <th mat-header-cell *matHeaderCellDef>
              <mat-form-field class="example-full-width" appearance="none">
                <mat-label>Minutos</mat-label>
                <input matInput disabled>
              </mat-form-field>
            </th>
            <td mat-cell *matCellDef="let element">
              {{element.tt}}
            </td>
          </ng-container>


          <ng-container matColumnDef="demo-action">
            <th mat-header-cell *matHeaderCellDef>
              <mat-form-field class="example-full-width" appearance="none">
                <mat-label></mat-label>
                <input matInput disabled>
              </mat-form-field>
            </th>
            <td mat-cell *matCellDef="let element">
              <div style="display:flex !important ;justify-content: flex-end !important;">
                <button mat-icon-button (click)="deletetime(element)">
                    <mat-icon>close</mat-icon>
                </button>
            </div>
            </td>
          </ng-container>

          <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
          <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
        </table>
      </div>

    </mat-tab>

  </mat-tab-group>
</div>